{% extends 'dashboard.html' %}
{% block content %}
<div class="container">
    <div class="row">
      <div class="col-12">
        <h1>Welcome to your dashboard {{ user.username}}</h1>
        <h2>Role: {{user.role}}</h2>
            {% if user.role == 'tutor' %}
        <h3>Languages:</h3>
        <ul class="list-group">
            {% for language in user.tutor_profile.languages.all %}
                <li class="list-group-item">{{ language.name }}</li>
            {% endfor %}
        </ul>
        <br>
        <a href="{% url 'tutor_lang_request' %}" class="btn btn-warning">
            Manage Languages
        </a>
        <h4 class="mb-3"></h4>

        </a>
        <h4 class="mb-3"></h4>
        <div>
            <h2>Your Availability Requests</h2>
            <table class="table table-striped">
                <thead class="table-dark">
                    <tr>
                        <th>Date</th>
                        <th>Start Time</th>
                        <th>End Time</th>
                        <th>Status</th>
                        <th>Edit</th>
                    </tr>
                </thead>
                <tbody>

                    {% for availability in availabilities %}
                        <tr>
                            <td>{{ availability.day }}</td>
                            <td>{{ availability.start_time }}</td>
                            <td>{{ availability.end_time }}</td>
                            <td>
                                {% if availability.availability_status == "available" %}
                                    <span class="badge bg-success">Available</span>
                                {% else %}
                                    <span class="badge bg-danger">Not Available</span>
                                {% endif %}
                                <td>
                                    <a href="{% url 'edit_tutor_availability' availability.id %}" class="btn btn-warning btn-sm">Edit</a>
                                    <a href="{% url 'delete_tutor_availability' availability.id %}?action=delete" class="btn btn-danger btn-sm"
                                        onclick="return confirm('Are you sure you want to delete this availability?');">
                                        Delete
                                    </a>  
                                </td>
                            </td>
                        </tr>
                    {% empty %}
                        <tr>
                            <td colspan="3" class="text-center">No availability requests found.</td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        <h4 class="mb-3"></h4>
        <div class="d-flex justify-content-end">
            <a class="btn btn-primary" href="{% url 'tutor_availability_request' %}">Add Availability Request</a>
        </div>
        </div>
    </div>
</div>
{% endif %}
{% endblock %}